{"version":3,"sources":["../../../../src/app/admin/inquiries/MarkRepliedButton.tsx","../../../../src/app/admin/inquiries/InquiryReplyForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\nexport default function MarkRepliedButton({ inquiryId }: { inquiryId: string }) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n\n  async function handleClick() {\n    setLoading(true);\n    try {\n      const res = await fetch(`/api/admin/inquiries?id=${inquiryId}`, {\n        method: \"PATCH\",\n      });\n      if (res.ok) router.refresh();\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <button\n      type=\"button\"\n      onClick={handleClick}\n      disabled={loading}\n      className=\"shrink-0 rounded-lg bg-slate-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-600 disabled:opacity-50\"\n    >\n      {loading ? \"...\" : \"Mark replied\"}\n    </button>\n  );\n}\n","\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\ntype Props = {\n  inquiryId: string;\n};\n\nexport default function InquiryReplyForm({ inquiryId }: Props) {\n  const router = useRouter();\n  const [message, setMessage] = useState(\"\");\n  const [status, setStatus] = useState<\"idle\" | \"sending\" | \"success\" | \"error\">(\n    \"idle\"\n  );\n  const [errorText, setErrorText] = useState(\"\");\n\n  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    setErrorText(\"\");\n    setStatus(\"sending\");\n\n    try {\n      const res = await fetch(\"/api/admin/inquiries/reply\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ id: inquiryId, message }),\n      });\n\n      const data = await res.json().catch(() => ({}));\n\n      if (!res.ok) {\n        setStatus(\"error\");\n        setErrorText(data.error || \"Failed to send reply\");\n        return;\n      }\n\n      setStatus(\"success\");\n      setMessage(\"\");\n      router.refresh();\n    } catch {\n      setStatus(\"error\");\n      setErrorText(\"Something went wrong\");\n    }\n  }\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"mt-6 rounded-xl border border-slate-600/50 bg-slate-800/50 p-4\"\n    >\n      <label\n        htmlFor={`reply-${inquiryId}`}\n        className=\"block text-sm font-medium text-slate-300\"\n      >\n        Reply to this message\n      </label>\n      <textarea\n        id={`reply-${inquiryId}`}\n        rows={4}\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        placeholder=\"Type your reply here. It will be emailed to the sender.\"\n        className=\"mt-2 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-3 text-white placeholder-slate-500 focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500\"\n        required\n        disabled={status === \"sending\"}\n      />\n      {status === \"success\" && (\n        <p className=\"mt-2 text-sm text-emerald-400\">Reply sent successfully.</p>\n      )}\n      {status === \"error\" && (\n        <p className=\"mt-2 text-sm text-red-400\" role=\"alert\">\n          {errorText}\n        </p>\n      )}\n      <button\n        type=\"submit\"\n        disabled={status === \"sending\" || !message.trim()}\n        className=\"mt-3 rounded-lg bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-cyan-400 disabled:opacity-50\"\n      >\n        {status === \"sending\" ? \"Sending...\" : \"Send reply\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAkB,WAAE,CAAS,CAAyB,EAC5E,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAEvC,eAAe,IACb,GAAW,GACX,GAAI,CAIE,CAHQ,MAAM,MAAM,CAAC,wBAAwB,EAAE,EAAA,CAAW,CAAE,CAC9D,OAAQ,OACV,EAAA,EACQ,EAAE,EAAE,EAAO,OAAO,EAC5B,QAAU,CACR,GAAW,EACb,CACF,CAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,SAAU,EACV,UAAU,uIAET,EAAU,MAAQ,gBAGzB,iEC7BA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMe,SAAS,EAAiB,WAAE,CAAS,CAAS,EAC3D,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAClC,QAEI,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE3C,eAAe,EAAa,CAAmC,EAC7D,EAAE,cAAc,GAChB,EAAa,IACb,EAAU,WAEV,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,6BAA8B,CACpD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,GAAI,UAAW,CAAQ,EAChD,GAEM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAO,AAAD,EAAE,CAAC,GAE7C,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,EAAU,SACV,EAAa,EAAK,KAAK,EAAI,wBAC3B,MACF,CAEA,EAAU,WACV,EAAW,IACX,EAAO,OAAO,EAChB,CAAE,KAAM,CACN,EAAU,SACV,EAAa,uBACf,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,SAAU,EACV,UAAU,2EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,QAAS,CAAC,MAAM,EAAE,EAAA,CAAW,CAC7B,UAAU,oDACX,0BAGD,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,GAAI,CAAC,MAAM,EAAE,EAAA,CAAW,CACxB,KAAM,EACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,EAC1C,YAAY,0DACZ,UAAU,mLACV,QAAQ,CAAA,CAAA,EACR,SAAqB,YAAX,IAEA,YAAX,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,6BAEnC,UAAX,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4BAA4B,KAAK,iBAC3C,IAGL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAqB,YAAX,GAAwB,CAAC,EAAQ,IAAI,GAC/C,UAAU,uIAEE,YAAX,EAAuB,aAAe,iBAI/C"}