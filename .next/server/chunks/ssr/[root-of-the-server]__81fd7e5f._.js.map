{"version":3,"sources":["../../../../src/lib/inquiries.ts","../../../../src/app/admin/inquiries/MarkRepliedButton.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/inquiries/InquiryReplyForm.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/admin/inquiries/page.tsx"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\n\nexport type InquiryReply = {\n  message: string;\n  sentAt: string;\n};\n\nexport type Inquiry = {\n  id: string;\n  name: string;\n  email: string;\n  subject: string;\n  message: string;\n  status: \"new\" | \"replied\";\n  createdAt: string;\n  repliedAt?: string;\n  replies?: InquiryReply[];\n};\n\nconst DATA_DIR = path.join(process.cwd(), \"data\");\nconst INQUIRIES_FILE = path.join(DATA_DIR, \"inquiries.json\");\n\nasync function ensureDataDir() {\n  await fs.mkdir(DATA_DIR, { recursive: true });\n}\n\nasync function readInquiries(): Promise<Inquiry[]> {\n  try {\n    await ensureDataDir();\n    const data = await fs.readFile(INQUIRIES_FILE, \"utf-8\");\n    return JSON.parse(data);\n  } catch {\n    return [];\n  }\n}\n\nexport async function getInquiries(): Promise<Inquiry[]> {\n  const inquiries = await readInquiries();\n  return inquiries.sort(\n    (a, b) =>\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n  );\n}\n\nexport async function getInquiryById(id: string): Promise<Inquiry | null> {\n  const inquiries = await readInquiries();\n  return inquiries.find((i) => i.id === id) ?? null;\n}\n\nexport async function addInquiry(\n  inquiry: Omit<Inquiry, \"id\" | \"status\" | \"createdAt\">\n): Promise<Inquiry> {\n  const { v4: uuid } = await import(\"uuid\");\n  const inquiries = await readInquiries();\n  const newInquiry: Inquiry = {\n    ...inquiry,\n    id: uuid(),\n    status: \"new\",\n    createdAt: new Date().toISOString(),\n  };\n  inquiries.push(newInquiry);\n  await ensureDataDir();\n  await fs.writeFile(INQUIRIES_FILE, JSON.stringify(inquiries, null, 2));\n  return newInquiry;\n}\n\nexport async function markInquiryReplied(id: string): Promise<boolean> {\n  const inquiries = await readInquiries();\n  const idx = inquiries.findIndex((i) => i.id === id);\n  if (idx === -1) return false;\n  inquiries[idx].status = \"replied\";\n  inquiries[idx].repliedAt = new Date().toISOString();\n  await ensureDataDir();\n  await fs.writeFile(INQUIRIES_FILE, JSON.stringify(inquiries, null, 2));\n  return true;\n}\n\nexport async function addReplyToInquiry(\n  id: string,\n  message: string\n): Promise<boolean> {\n  const inquiries = await readInquiries();\n  const idx = inquiries.findIndex((i) => i.id === id);\n  if (idx === -1) return false;\n  const reply: InquiryReply = {\n    message: message.trim(),\n    sentAt: new Date().toISOString(),\n  };\n  const inquiry = inquiries[idx];\n  inquiry.replies = inquiry.replies ?? [];\n  inquiry.replies.push(reply);\n  inquiry.status = \"replied\";\n  inquiry.repliedAt = reply.sentAt;\n  await ensureDataDir();\n  await fs.writeFile(INQUIRIES_FILE, JSON.stringify(inquiries, null, 2));\n  return true;\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/inquiries/MarkRepliedButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/inquiries/MarkRepliedButton.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/inquiries/InquiryReplyForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/inquiries/InquiryReplyForm.tsx\",\n    \"default\",\n);\n","import { getInquiries } from \"@/lib/inquiries\";\nimport MarkRepliedButton from \"./MarkRepliedButton\";\nimport InquiryReplyForm from \"./InquiryReplyForm\";\n\nexport default async function AdminInquiriesPage() {\n  const inquiries = await getInquiries();\n\n  return (\n    <div>\n      <h1 className=\"text-3xl font-bold text-white\">Inquiries</h1>\n      <p className=\"mt-2 text-slate-400\">\n        Contact form submissions. Reply directly below or mark as replied.\n      </p>\n\n      {inquiries.length === 0 ? (\n        <p className=\"mt-8 text-slate-400\">No inquiries yet.</p>\n      ) : (\n        <ul className=\"mt-8 space-y-4\">\n          {inquiries.map((inquiry) => (\n            <li\n              key={inquiry.id}\n              className={`rounded-2xl border p-6 ${\n                inquiry.status === \"new\"\n                  ? \"border-orange-500/30 bg-orange-500/5\"\n                  : \"border-slate-700/50 bg-slate-800/50\"\n              }`}\n            >\n              <div className=\"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between\">\n                <div className=\"min-w-0 flex-1\">\n                  <div className=\"flex flex-wrap items-center gap-2\">\n                    <span className=\"text-sm text-slate-500\">\n                      {new Date(inquiry.createdAt).toLocaleString()}\n                    </span>\n                    {inquiry.status === \"new\" && (\n                      <span className=\"rounded-full bg-orange-500/20 px-2 py-0.5 text-xs font-medium text-orange-400\">\n                        New\n                      </span>\n                    )}\n                  </div>\n                  <h3 className=\"mt-2 font-semibold text-white\">{inquiry.subject}</h3>\n                  <p className=\"mt-1 text-slate-400\">\n                    From: {inquiry.name} &lt;\n                    <a\n                      href={`mailto:${inquiry.email}`}\n                      className=\"text-cyan-400 hover:underline\"\n                    >\n                      {inquiry.email}\n                    </a>\n                    &gt;\n                  </p>\n                  <p className=\"mt-4 whitespace-pre-wrap text-slate-300\">\n                    {inquiry.message}\n                  </p>\n                  {inquiry.replies && inquiry.replies.length > 0 && (\n                    <div className=\"mt-6 space-y-4\">\n                      <h4 className=\"text-sm font-medium text-cyan-400\">\n                        Your reply {inquiry.replies.length > 1 ? `(${inquiry.replies.length})` : \"\"}\n                      </h4>\n                      {inquiry.replies.map((reply, i) => (\n                        <div\n                          key={reply.sentAt + i}\n                          className=\"rounded-lg border border-cyan-500/20 bg-cyan-500/10 p-4\"\n                        >\n                          <p className=\"text-xs text-slate-500\">\n                            {new Date(reply.sentAt).toLocaleString()}\n                          </p>\n                          <p className=\"mt-2 whitespace-pre-wrap text-slate-200\">\n                            {reply.message}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                {inquiry.status === \"new\" && (\n                  <MarkRepliedButton inquiryId={inquiry.id} />\n                )}\n              </div>\n              <InquiryReplyForm inquiryId={inquiry.id} />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2]}