module.exports=[51562,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({value:a,onChange:d,id:e="imageUrl"}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),j=(0,c.useRef)(null);async function k(a){let b=a.target.files?.[0];if(b){i(""),g(!0);try{let a=new FormData;a.set("file",b);let c=await fetch("/api/admin/upload",{method:"POST",body:a}),e=await c.json().catch(()=>({}));if(!c.ok)return void i(e.error||"Upload failed");e.url&&d(e.url)}catch{i("Upload failed")}finally{g(!1),a.target.value=""}}}return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-slate-300",children:"Image URL or upload"}),(0,b.jsx)("input",{id:e,type:"text",value:a,onChange:a=>{i(""),d(a.target.value)},className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white placeholder-slate-500 focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500",placeholder:"https://... or upload below"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:k,disabled:f,className:"hidden","aria-label":"Upload image"}),(0,b.jsx)("button",{type:"button",onClick:()=>j.current?.click(),disabled:f,className:"rounded-lg border border-slate-600 bg-slate-700 px-4 py-2 text-sm text-slate-200 transition hover:bg-slate-600 disabled:opacity-50",children:f?"Uploading...":"Upload image"}),a&&(0,b.jsxs)("span",{className:"text-xs text-slate-500",children:["Current: ",a.startsWith("/")?a:"external URL"]})]}),h&&(0,b.jsx)("p",{className:"text-sm text-red-400",role:"alert",children:h})]})}a.s(["default",()=>d])},75707,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(51562);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)("idle"),[h,i]=(0,c.useState)({name:"",description:"",category:"Software",imageUrl:""});async function j(b){b.preventDefault(),g("sending");try{if(!(await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,imageUrl:h.imageUrl||void 0})})).ok)throw Error("Failed to add");g("success"),i({name:"",description:"",category:"Software",imageUrl:""}),a.refresh()}catch{g("error")}}return(0,b.jsxs)("form",{onSubmit:j,className:"mt-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-300",children:"Name *"}),(0,b.jsx)("input",{id:"name",type:"text",required:!0,value:h.name,onChange:a=>i(b=>({...b,name:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-300",children:"Category"}),(0,b.jsx)("input",{id:"category",type:"text",value:h.category,onChange:a=>i(b=>({...b,category:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500",placeholder:"e.g. Software, App, Tool"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300",children:"Description *"}),(0,b.jsx)("textarea",{id:"description",required:!0,rows:3,value:h.description,onChange:a=>i(b=>({...b,description:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,b.jsx)("div",{children:(0,b.jsx)(e.default,{id:"imageUrl",value:h.imageUrl,onChange:a=>i(b=>({...b,imageUrl:a}))})}),"success"===f&&(0,b.jsx)("p",{className:"text-emerald-400",children:"Product added successfully."}),"error"===f&&(0,b.jsx)("p",{className:"text-red-400",children:"Failed to add product. Please try again."}),(0,b.jsx)("button",{type:"submit",disabled:"sending"===f,className:"rounded-lg bg-cyan-500 px-6 py-2 font-semibold text-slate-900 transition hover:bg-cyan-400 disabled:opacity-50",children:"sending"===f?"Adding...":"Add product"})]})}a.s(["default",()=>f])},82332,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e({productId:a,productName:e}){let f=(0,d.useRouter)(),[g,h]=(0,c.useState)(!1);async function i(){if(confirm(`Delete "${e}"?`)){h(!0);try{(await fetch(`/api/admin/products?id=${a}`,{method:"DELETE"})).ok&&f.refresh()}finally{h(!1)}}}return(0,b.jsx)("button",{type:"button",onClick:i,disabled:g,className:"shrink-0 rounded-lg border border-red-500/50 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-400 transition hover:bg-red-500/20 disabled:opacity-50",children:g?"Deleting...":"Delete"})}var f=a.i(51562);function g({product:a}){let g=(0,d.useRouter)(),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)("idle"),[l,m]=(0,c.useState)({name:a.name,description:a.description,category:a.category,imageUrl:a.imageUrl??""});async function n(b){b.preventDefault(),k("saving");try{let b=await fetch("/api/admin/products",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.id,name:l.name,description:l.description,category:l.category,imageUrl:l.imageUrl||void 0})});if(!b.ok){await b.json().catch(()=>({})),k("error");return}k("success"),i(!1),g.refresh()}catch{k("error")}}return h?(0,b.jsx)("li",{className:"rounded-xl border border-slate-600 bg-slate-800/80 p-4",children:(0,b.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:l.name,onChange:a=>m(b=>({...b,name:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Category"}),(0,b.jsx)("input",{type:"text",value:l.category,onChange:a=>m(b=>({...b,category:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Description *"}),(0,b.jsx)("textarea",{required:!0,rows:3,value:l.description,onChange:a=>m(b=>({...b,description:a.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,b.jsx)("div",{children:(0,b.jsx)(f.default,{id:`image-${a.id}`,value:l.imageUrl,onChange:a=>m(b=>({...b,imageUrl:a}))})}),"error"===j&&(0,b.jsx)("p",{className:"text-sm text-red-400",children:"Failed to save. Try again."}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"submit",disabled:"saving"===j,className:"rounded-lg bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-cyan-400 disabled:opacity-50",children:"saving"===j?"Saving...":"Save"}),(0,b.jsx)("button",{type:"button",onClick:function(){m({name:a.name,description:a.description,category:a.category,imageUrl:a.imageUrl??""}),i(!1),k("idle")},disabled:"saving"===j,className:"rounded-lg border border-slate-600 px-4 py-2 text-sm text-slate-300 transition hover:bg-slate-700 disabled:opacity-50",children:"Cancel"})]})]})}):(0,b.jsxs)("li",{className:"flex flex-col gap-4 rounded-xl border border-slate-700/50 bg-slate-800/50 p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("span",{className:"text-sm text-cyan-400",children:a.category}),(0,b.jsx)("h3",{className:"font-semibold text-white",children:a.name}),(0,b.jsx)("p",{className:"mt-1 truncate text-sm text-slate-400",children:a.description})]}),(0,b.jsxs)("div",{className:"flex shrink-0 gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>i(!0),className:"rounded-lg border border-slate-600 bg-slate-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-600",children:"Edit"}),(0,b.jsx)(e,{productId:a.id,productName:a.name})]})]})}a.s(["default",()=>g],82332)}];

//# sourceMappingURL=src_7420b685._.js.map