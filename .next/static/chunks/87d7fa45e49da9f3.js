(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40266,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s({value:e,onChange:s,id:r="imageUrl"}){let[l,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),d=(0,a.useRef)(null);async function c(e){let t=e.target.files?.[0];if(t){o(""),i(!0);try{let e=new FormData;e.set("file",t);let a=await fetch("/api/admin/upload",{method:"POST",body:e}),r=await a.json().catch(()=>({}));if(!a.ok)return void o(r.error||"Upload failed");r.url&&s(r.url)}catch{o("Upload failed")}finally{i(!1),e.target.value=""}}}return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:r,className:"block text-sm font-medium text-slate-300",children:"Image URL or upload"}),(0,t.jsx)("input",{id:r,type:"text",value:e,onChange:e=>{o(""),s(e.target.value)},className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white placeholder-slate-500 focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500",placeholder:"https://... or upload below"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("input",{ref:d,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:c,disabled:l,className:"hidden","aria-label":"Upload image"}),(0,t.jsx)("button",{type:"button",onClick:()=>d.current?.click(),disabled:l,className:"rounded-lg border border-slate-600 bg-slate-700 px-4 py-2 text-sm text-slate-200 transition hover:bg-slate-600 disabled:opacity-50",children:l?"Uploading...":"Upload image"}),e&&(0,t.jsxs)("span",{className:"text-xs text-slate-500",children:["Current: ",e.startsWith("/")?e:"external URL"]})]}),n&&(0,t.jsx)("p",{className:"text-sm text-red-400",role:"alert",children:n})]})}e.s(["default",()=>s])},85501,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(40266);function l(){let e=(0,s.useRouter)(),[l,i]=(0,a.useState)("idle"),[n,o]=(0,a.useState)({name:"",description:"",category:"Software",imageUrl:""});async function d(t){t.preventDefault(),i("sending");try{if(!(await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,imageUrl:n.imageUrl||void 0})})).ok)throw Error("Failed to add");i("success"),o({name:"",description:"",category:"Software",imageUrl:""}),e.refresh()}catch{i("error")}}return(0,t.jsxs)("form",{onSubmit:d,className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-300",children:"Name *"}),(0,t.jsx)("input",{id:"name",type:"text",required:!0,value:n.name,onChange:e=>o(t=>({...t,name:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-300",children:"Category"}),(0,t.jsx)("input",{id:"category",type:"text",value:n.category,onChange:e=>o(t=>({...t,category:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500",placeholder:"e.g. Software, App, Tool"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300",children:"Description *"}),(0,t.jsx)("textarea",{id:"description",required:!0,rows:3,value:n.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,t.jsx)("div",{children:(0,t.jsx)(r.default,{id:"imageUrl",value:n.imageUrl,onChange:e=>o(t=>({...t,imageUrl:e}))})}),"success"===l&&(0,t.jsx)("p",{className:"text-emerald-400",children:"Product added successfully."}),"error"===l&&(0,t.jsx)("p",{className:"text-red-400",children:"Failed to add product. Please try again."}),(0,t.jsx)("button",{type:"submit",disabled:"sending"===l,className:"rounded-lg bg-cyan-500 px-6 py-2 font-semibold text-slate-900 transition hover:bg-cyan-400 disabled:opacity-50",children:"sending"===l?"Adding...":"Add product"})]})}e.s(["default",()=>l])},45115,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566);function r({productId:e,productName:r}){let l=(0,s.useRouter)(),[i,n]=(0,a.useState)(!1);async function o(){if(confirm(`Delete "${r}"?`)){n(!0);try{(await fetch(`/api/admin/products?id=${e}`,{method:"DELETE"})).ok&&l.refresh()}finally{n(!1)}}}return(0,t.jsx)("button",{type:"button",onClick:o,disabled:i,className:"shrink-0 rounded-lg border border-red-500/50 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-400 transition hover:bg-red-500/20 disabled:opacity-50",children:i?"Deleting...":"Delete"})}var l=e.i(40266);function i({product:e}){let i=(0,s.useRouter)(),[n,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)("idle"),[u,m]=(0,a.useState)({name:e.name,description:e.description,category:e.category,imageUrl:e.imageUrl??""});async function g(t){t.preventDefault(),c("saving");try{let t=await fetch("/api/admin/products",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,name:u.name,description:u.description,category:u.category,imageUrl:u.imageUrl||void 0})});if(!t.ok){await t.json().catch(()=>({})),c("error");return}c("success"),o(!1),i.refresh()}catch{c("error")}}return n?(0,t.jsx)("li",{className:"rounded-xl border border-slate-600 bg-slate-800/80 p-4",children:(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:u.name,onChange:e=>m(t=>({...t,name:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Category"}),(0,t.jsx)("input",{type:"text",value:u.category,onChange:e=>m(t=>({...t,category:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-300",children:"Description *"}),(0,t.jsx)("textarea",{required:!0,rows:3,value:u.description,onChange:e=>m(t=>({...t,description:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-600 bg-slate-800 px-4 py-2 text-white focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500"})]}),(0,t.jsx)("div",{children:(0,t.jsx)(l.default,{id:`image-${e.id}`,value:u.imageUrl,onChange:e=>m(t=>({...t,imageUrl:e}))})}),"error"===d&&(0,t.jsx)("p",{className:"text-sm text-red-400",children:"Failed to save. Try again."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"submit",disabled:"saving"===d,className:"rounded-lg bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-cyan-400 disabled:opacity-50",children:"saving"===d?"Saving...":"Save"}),(0,t.jsx)("button",{type:"button",onClick:function(){m({name:e.name,description:e.description,category:e.category,imageUrl:e.imageUrl??""}),o(!1),c("idle")},disabled:"saving"===d,className:"rounded-lg border border-slate-600 px-4 py-2 text-sm text-slate-300 transition hover:bg-slate-700 disabled:opacity-50",children:"Cancel"})]})]})}):(0,t.jsxs)("li",{className:"flex flex-col gap-4 rounded-xl border border-slate-700/50 bg-slate-800/50 p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("span",{className:"text-sm text-cyan-400",children:e.category}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:e.name}),(0,t.jsx)("p",{className:"mt-1 truncate text-sm text-slate-400",children:e.description})]}),(0,t.jsxs)("div",{className:"flex shrink-0 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o(!0),className:"rounded-lg border border-slate-600 bg-slate-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-600",children:"Edit"}),(0,t.jsx)(r,{productId:e.id,productName:e.name})]})]})}e.s(["default",()=>i],45115)}]);